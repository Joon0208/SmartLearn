<!DOCTYPE html>
<html>
<head>
    <title>Student Experience</title>
    <style>
        body {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
            margin: 0;
            font-family: Arial, sans-serif;
            background-color: #f5f5f5;
        }

        h1 {
            text-align: center;
            margin-bottom: 30px;
        }

        #main-container {
            display: flex;
            justify-content: center;
            align-items: flex-start;
            margin-top: 20px;
        }

        #video-container {
            position: relative;
            width: 640px;
            height: 480px;
            background-color: #000;
            border: 2px solid #000;
        }

        #video {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        #score-container {
            margin-left: 20px;
            display: flex;
            flex-direction: column;
            align-items: flex-start;
        }

        .student-score {
            margin-top: 10px;
            padding: 10px;
            width: 200px;
            text-align: center;
            background-color: #fff;
            border: 2px solid #000;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .questionable-emotion {
            background-color: #ffeb3b;
        }
    </style>
    <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@latest"></script>
    <script src="https://cdn.jsdelivr.net/npm/@tensorflow-models/face-landmarks-detection@0.3"></script>
    <script src="https://cdn.jsdelivr.net/npm/@tensorflow-models/blazeface@latest"></script>
    <script>
        async function startVideo() {
            const video = document.getElementById('video');
            const scoreContainer = document.getElementById('score-container');

            const stream = await navigator.mediaDevices.getUserMedia({ video: true });
            video.srcObject = stream;

            const model = await blazeface.load();
            setInterval(async () => {
                const predictions = await model.estimateFaces(video);
                scoreContainer.innerHTML = ''; // Clear previous scores

                for (let i = 0; i < 5; i++) {
                    const studentScore = document.createElement('div');
                    studentScore.classList.add('student-score');
                    studentScore.innerText = `Student ${i + 1}`;

                    scoreContainer.appendChild(studentScore);
                }

                if (predictions.length > 0) {
                    for (let i = 0; i < predictions.length; i++) {
                        const prediction = predictions[i];
                        const emotions = prediction.emotions;

                        // Check for questionable emotions
                        if (emotions.surprised > 0.5 || emotions.disgusted > 0.5) {
                            const studentScore = scoreContainer.children[i];
                            studentScore.classList.add('questionable-emotion');
                            alert(`Questionable emotion detected for Student ${i + 1}!`);
                        }
                    }
                }
            }, 100);
        }

        document.addEventListener('DOMContentLoaded', startVideo);
    </script>
</head>
<body>
    <h1>Student Experience</h1>
    <div id="main-container">
        <div id="video-container">
            <video id="video" autoplay></video>
        </div>
        <div id="score-container">
            <div class="student-score">Student 1</div>
            <div class="student-score">Student 2</div>
            <div class="student-score">Student 3</div>
            <div class="student-score">Student 4</div>
            <div class="student-score">Student 5</div>
        </div>
    </div>
</body>
</html>
